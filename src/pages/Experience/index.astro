---
import Layout from "../Layout.astro";
import MainInformation from "../../Components/Experience/molecules/MainInformation.astro";
import ProjectsSecction from "../../Components/Experience/organism/ProjectsSecction.astro";
import CertificatesSecction from "../../Components/Experience/organism/CertificatesSecction.astro";
import TechnologiesSecction from "../../Components/Experience/organism/TechnologiesSecction.astro";
---

<Layout>
  <main
    class="w-screen min-h-screen flex flex-col items-center box-border pt-20 px-5 pb-2 overflow-x-hidden"
  >
    <MainInformation />

    <div class="w-full max-w-[1200px] flex justify-center">
      <div class="flex flex-col items-center w-full max-[480px]:px-1.5">
        <!-- Navbar -->
        <nav class="flex justify-center p-10 flex-wrap gap-2">
          <button
            class="nav-button active-button text-soft-purple border-2 border-primary bg-transparent rounded py-3 px-4 md:py-2.5 md:px-3 max-[480px]:py-2 max-[480px]:px-2.5 max-[320px]:py-1.5 max-[320px]:px-2 m-1.5 md:m-[3px] max-[480px]:m-0.5 max-[320px]:m-px transition-all duration-500 cursor-pointer text-sm md:text-[13px] max-[480px]:text-xs max-[320px]:text-[11px] whitespace-nowrap min-w-[100px] md:min-w-20 max-[480px]:min-w-[70px] max-[320px]:min-w-[60px]"
            onclick="setTab('projects')"
          >
            Proyectos
          </button>

          <button
            class="nav-button text-soft-purple border-2 border-primary bg-transparent rounded py-3 px-4 md:py-2.5 md:px-3 max-[480px]:py-2 max-[480px]:px-2.5 max-[320px]:py-1.5 max-[320px]:px-2 m-1.5 md:m-[3px] max-[480px]:m-0.5 max-[320px]:m-px transition-all duration-500 cursor-pointer text-sm md:text-[13px] max-[480px]:text-xs max-[320px]:text-[11px] whitespace-nowrap min-w-[100px] md:min-w-20 max-[480px]:min-w-[70px] max-[320px]:min-w-[60px]"
            onclick="setTab('certificates')"
          >
            Certificados
          </button>

          <button
            class="nav-button text-soft-purple border-2 border-primary bg-transparent rounded py-3 px-4 md:py-2.5 md:px-3 max-[480px]:py-2 max-[480px]:px-2.5 max-[320px]:py-1.5 max-[320px]:px-2 m-1.5 md:m-[3px] max-[480px]:m-0.5 max-[320px]:m-px transition-all duration-500 cursor-pointer text-sm md:text-[13px] max-[480px]:text-xs max-[320px]:text-[11px] whitespace-nowrap min-w-[100px] md:min-w-20 max-[480px]:min-w-[70px] max-[320px]:min-w-[60px]"
            onclick="setTab('technologies')"
          >
            Tecnologías
          </button>
        </nav>

        <!-- Contenido de tabs -->
        <div class="flex justify-center items-center flex-col w-full">
          <div
            id="projects"
            class="tab-content  flex items-center justify-center"
          >
            <ProjectsSecction />
          </div>
          <div
            id="certificates"
            class="tab-content flex items-center justify-center"
          >
            <CertificatesSecction />
          </div>
          <div
            id="technologies"
            class="tab-content active flex items-center justify-center"
          >
            <TechnologiesSecction />
          </div>
        </div>
      </div>
    </div>

    <!-- Estilos para tabs -->
    <style>
      .tab-content {
        display: none;
        /* Propiedades para la transición */
        opacity: 0;
        transform: scale(0.98); /* Ligeramente más pequeño al inicio */
        transition:
          opacity 0.5s ease,
          transform 0.5s ease; /* Aplica transición a la opacidad y la transformación */
        width: 100%; /* Asegura que ocupe todo el ancho disponible para el contenido */
      }

      .tab-content.active {
        display: flex; /* Mantenemos 'flex' si quieres centrar el contenido, si no, puedes usar 'block' */
        opacity: 1; /* Opacidad completa (visible) */
        transform: scale(1);
      }

      .nav-button.active-button {
        background-color: blueviolet;
        color: #f0f8ff;
      }
    </style>

    <script is:inline>
      function setTab(tab) {
        document
          .querySelectorAll(".tab-content")
          .forEach((el) => el.classList.remove("active"));
        document.getElementById(tab)?.classList.add("active");

        document
          .querySelectorAll("nav button")
          .forEach((btn) => btn.classList.remove("active-button"));
        document
          .querySelector(`nav button[onclick="setTab('${tab}')"]`)
          ?.classList.add("active-button");
      }
    </script>
  </main>
</Layout>
